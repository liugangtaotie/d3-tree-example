import{j as t}from"./jsplumb.f24db14b.js";import{n as e,h as n,t as i}from"./index.50c65bbf.js";const o={};var s=e({name:"landing-page",data:()=>({jsPlumbInstance:"",jsPlumbSetting:{Anchors:["Top","TopCenter","TopRight","TopLeft","Right","RightMiddle","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Connector:["Bezier",{curviness:60}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoints:[["Dot",{radius:2}],["Dot",{radius:2}]],EndpointStyle:{fill:"skyblue",outlineWidth:1},PaintStyle:{stroke:"#000000",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}]],RenderMode:"svg",DragOptions:{cursor:"pointer",zIndex:2e3},HoverPaintStyle:{stroke:"skyblue",strokeWidth:3,cursor:"pointer"}},jsPlumbConnectOptions:{isSource:!0,isTarget:!0,anchor:"Continuous",overlays:[["Arrow",{width:8,length:8,location:1}]]},commonLink:{isSource:!0,isTarget:!0,anchor:["Perimeter",{shape:"Circle"}],connector:["Bezier"],endpoint:"Dot",maxConnections:-1},dataList:{id:1,name:"中国",children:[{id:2,name:"北京",children:[{id:6,name:"海淀区"},{id:7,name:"高新区"}]},{id:3,name:"贵州",children:[{id:4,name:"贵阳"},{id:5,name:"黔西南"},{id:8,name:"黔东南"}]}]},nodeList:[],lineList:[]}),mounted(){this.setNodeInfo(this.dataList),this.drawLines()},methods:{setNodeInfo(t){const e=n(t),o=i().nodeSize([200,180])(e),s=o.descendants(),a=o.links();this.nodeList=s.map((t=>({id:t.data.id,name:t.data.name,left:t.x+900+"px",top:t.y+"px"}))),this.lineList=a.map((t=>({source:`node-${t.source.data.id}`,target:`node-${t.target.data.id}`,overlays:[["Arrow",{width:10,length:10,location:.5}]]})))},drawLines(){this.$nextTick().then((()=>{t.jsPlumb.ready((()=>{this.jsPlumbInstance=t.jsPlumb.getInstance(),this.jsPlumbInstance.importDefaults(this.jsPlumbSetting),this.lineList.forEach((t=>{this.jsPlumbInstance.connect(t,this.jsPlumbConnectOptions)})),this.nodeList.forEach(((t,e)=>{this.jsPlumbInstance.draggable("node-"+(e+1)),this.jsPlumbInstance.addEndpoint("node-"+(e+1),{anchor:["Bottom","Top","Left","Right"],Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}]]},this.commonLink)}))})),this.jsPlumbInstance.repaintEverything()}))}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",{staticStyle:{"text-align":"center",padding:"50px"}},[t._v(" JsPlumb + D3js实现自定义节点，可拖拽节点,自动树状布局 ")]),n("div",{attrs:{id:"relation-box"}},t._l(t.nodeList,(function(e){return n("div",{key:e.id,staticClass:"node",style:{left:e.left,top:e.top},attrs:{id:"node-"+e.id}},[t._v(" "+t._s(e.name)+" "),n("div",[t._v("detail...")])])})),0)])}),[],!1,a,"6b0c0d63",null,null);function a(t){for(let e in o)this[e]=o[e]}var d=function(){return s.exports}();export{d as default};

import{o as k,r as y,q as _,u as v,v as w,w as M,s as l,x as N,z}from"./vendor.a3bf09b0.js";import{n as T}from"./index.35d24c55.js";var $=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"force-page"})},D=[];const A={name:"force-3",data(){return{point:null,nodesData:null,linksData:null,nodes:null,texts:null,linksText:null,links:null,simulation:null}},mounted(){this.drawForce()},methods:{drawForce(){let t=[{name:"\u6842\u6797",id:0},{name:"\u5E7F\u5DDE",id:1},{name:"\u53A6\u95E8",id:2},{name:"\u676D\u5DDE",id:3},{name:"\u4E0A\u6D77",id:4},{name:"\u9752\u5C9B",id:5},{name:"\u5929\u6D25",id:6}];this.nodesData=t;let a=[{source:0,target:1,relationship:"\u76F4\u8FBE1",linkNum:1},{source:1,target:0,relationship:"\u76F4\u8FBE2",linkNum:2},{source:0,target:2,relationship:"\u76F4\u8FBE3",linkNum:0},{source:0,target:3,relationship:"\u76F4\u8FBE4",linkNum:0},{source:1,target:4,relationship:"\u76F4\u8FBE5",linkNum:0},{source:1,target:5,relationship:"\u76F4\u8FBE6",linkNum:1},{source:5,target:1,relationship:"\u76F4\u8FBE61",linkNum:2},{source:1,target:6,relationship:"\u76F4\u8FBE7",linkNum:0}];this.linksData=a;const n=800,i=600;let s=k(t).force("link",y(a).id(e=>e.id).distance(100)).force("charge",_().strength(-2e3)).force("center",v(n/2,i/2)).on("tick",this.ticked.bind(this));this.simulation=s;var u=w(M);let o=l(".force-page").append("svg").attr("id","chart").attr("width",n).attr("height",i).call(this.zoom()).append("g").attr("class","gWapper").attr("cursor","pointer"),p=o.append("g").selectAll("path").data(a).enter().append("path").attr("id",function(e,r){return"force-page;"+e.source.name+";"+e.target.name+";"+r}).attr("marker-end","url(#arrow)").attr("stroke",function(e,r){return"black"}).attr("stroke-width",1).attr("fill-opacity",0);this.links=p,o.append("defs").append("marker").attr("id","arrow").attr("markerWidth",8).attr("markerHeight",8).attr("refX",8).attr("refY",8).attr("orient","auto").append("path").attr("fill","red").attr("d","M0 0 L8 8 L0 16Z");let h=o.append("g").selectAll("circle").data(t).enter().append("circle").attr("r",30).attr("opacity",.5).attr("fill",(e,r)=>u(r)).call(N().on("start",g).on("drag",x).on("end",d));this.nodes=h;let f=o.append("g").selectAll("text").data(a).enter().append("text").attr("dy","5").append("textPath").attr("startOffset","30%").attr("xlink:href",function(e,r){return"#force-page;"+e.source.name+";"+e.target.name+";"+r}).text(function(e){return e.relationship}).attr("id",function(e,r){return"force-page;"+e.relationship+";"+r});this.linksText=f;let m=o.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("pointer-event","none").text(e=>e.name);this.texts=m;function g(e,r){console.info("kkk"),e.active||s.alphaTarget(.3).restart(),r.fx=r.x,r.fy=r.y}function x(e,r){r.fx=e.x,r.fy=e.y}function d(e,r){e.active||s.alphaTarget(0),r.fx=null,r.fy=null}},ticked(){this.links.attr("d",function(t){var a=(t.source.x-t.target.x)/Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2)),n=(t.source.y-t.target.y)/Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2));if(!a&&!n)return"";t.path=[],t.path[0]=t.source.x-a*30,t.path[1]=t.source.y-n*30,t.path[2]=t.target.x+a*30,t.path[3]=t.target.y+n*30;var i=175/t.linkNum;return t.linkNum===0?`M ${t.path[0]},${t.path[1]} L ${t.path[2]},${t.path[3]}`:"M"+t.path[0]+","+t.path[1]+"A"+i+","+i+" 0 0,1 "+t.path[2]+","+t.path[3]}),this.nodes.attr("cx",t=>t.x).attr("cy",t=>t.y),this.linksText.attr("x",function(t){return(t.source.x+t.target.x)/2}).attr("y",function(t){return(t.source.y+t.target.y)/2}),this.texts.attr("x",t=>t.x).attr("y",t=>t.y),this.simulation.alpha()<.2&&(this.nodes.attr("cx",t=>(t.fx=t.x,t.x)).attr("cy",t=>(t.fy=t.y,t.y)),this.simulation.stop())},zoom(){var t=z().scaleExtent([.1,10]).on("zoom",a);function a(n){l(".gWapper").attr("transform",n.transform)}return t}}},c={};var W=T(A,$,D,!1,q,"00c3d131",null,null);function q(t){for(let a in c)this[a]=c[a]}var C=function(){return W.exports}();export{C as default};

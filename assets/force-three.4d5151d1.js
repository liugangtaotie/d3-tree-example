import{n as t,b as a,c as e,m as r,d as n,o as i,e as s,s as o,f as l,z as c}from"./index.50c65bbf.js";const p={};var u=t({name:"force-3",data:()=>({point:null,nodesData:null,linksData:null,nodes:null,texts:null,linksText:null,links:null,simulation:null}),mounted(){this.drawForce()},methods:{drawForce(){let t=[{name:"桂林",id:0},{name:"广州",id:1},{name:"厦门",id:2},{name:"杭州",id:3},{name:"上海",id:4},{name:"青岛",id:5},{name:"天津",id:6}];this.nodesData=t;let c=[{source:0,target:1,relationship:"直达1",linkNum:1},{source:1,target:0,relationship:"直达2",linkNum:2},{source:0,target:2,relationship:"直达3",linkNum:0},{source:0,target:3,relationship:"直达4",linkNum:0},{source:1,target:4,relationship:"直达5",linkNum:0},{source:1,target:5,relationship:"直达6",linkNum:1},{source:5,target:1,relationship:"直达61",linkNum:2},{source:1,target:6,relationship:"直达7",linkNum:0}];this.linksData=c;let p=a(t).force("link",e(c).id((t=>t.id)).distance(100)).force("charge",r().strength(-2e3)).force("center",n(400,300)).on("tick",this.ticked.bind(this));this.simulation=p;var u=i(s);let h=o(".force-page").append("svg").attr("id","chart").attr("width",800).attr("height",600).call(this.zoom()).append("g").attr("class","gWapper").attr("cursor","pointer"),d=h.append("g").selectAll("path").data(c).enter().append("path").attr("id",(function(t,a){return"force-page;"+t.source.name+";"+t.target.name+";"+a})).attr("marker-end","url(#arrow)").attr("stroke",(function(t,a){return"black"})).attr("stroke-width",1).attr("fill-opacity",0);this.links=d,h.append("defs").append("marker").attr("id","arrow").attr("markerWidth",8).attr("markerHeight",8).attr("refX",8).attr("refY",8).attr("orient","auto").append("path").attr("fill","red").attr("d","M0 0 L8 8 L0 16Z");let f=h.append("g").selectAll("circle").data(t).enter().append("circle").attr("r",30).attr("opacity",.5).attr("fill",((t,a)=>u(a))).call(l().on("start",(function(t,a){t.active||p.alphaTarget(.3).restart();a.fx=a.x,a.fy=a.y})).on("drag",(function(t,a){a.fx=t.x,a.fy=t.y})).on("end",(function(t,a){t.active||p.alphaTarget(0);a.fx=null,a.fy=null})));this.nodes=f;let m=h.append("g").selectAll("text").data(c).enter().append("text").attr("dy","5").append("textPath").attr("startOffset","30%").attr("xlink:href",(function(t,a){return"#force-page;"+t.source.name+";"+t.target.name+";"+a})).text((function(t){return t.relationship})).attr("id",(function(t,a){return"force-page;"+t.relationship+";"+a}));this.linksText=m;let x=h.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("pointer-event","none").text((t=>t.name));this.texts=x},ticked(){this.links.attr("d",(function(t){var a=(t.source.x-t.target.x)/Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2)),e=(t.source.y-t.target.y)/Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2));if(!a&&!e)return"";t.path=[],t.path[0]=t.source.x-30*a,t.path[1]=t.source.y-30*e,t.path[2]=t.target.x+30*a,t.path[3]=t.target.y+30*e;var r=175/t.linkNum;return 0===t.linkNum?`M ${t.path[0]},${t.path[1]} L ${t.path[2]},${t.path[3]}`:"M"+t.path[0]+","+t.path[1]+"A"+r+","+r+" 0 0,1 "+t.path[2]+","+t.path[3]})),this.nodes.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),this.linksText.attr("x",(function(t){return(t.source.x+t.target.x)/2})).attr("y",(function(t){return(t.source.y+t.target.y)/2})),this.texts.attr("x",(t=>t.x)).attr("y",(t=>t.y)),this.simulation.alpha()<.2&&(this.nodes.attr("cx",(t=>(t.fx=t.x,t.x))).attr("cy",(t=>(t.fy=t.y,t.y))),this.simulation.stop())},zoom:()=>c().scaleExtent([.1,10]).on("zoom",(function(t){o(".gWapper").attr("transform",t.transform)}))}},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"force-page"})}),[],!1,h,"00c3d131",null,null);function h(t){for(let a in p)this[a]=p[a]}var d=function(){return u.exports}();export{d as default};
